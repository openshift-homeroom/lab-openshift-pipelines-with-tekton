Now that the `pipeline` is created, you can trigger it to execute the tasks specified in the `pipeline`. Triggering `pipelines` is an area that is under development and in the next release it will be possible to be done via the OpenShift web console and Tekton CLI. In this tutorial, you will trigger the pipeline through creating the Kubernetes objects (the hard way!) in order to learn the mechanics of triggering.

First, you should create `pipelineresources` that contain the specifics of the Git repository and image registry to be used in the `pipeline` during execution. These are also reusable across multiple pipelines.

The following `pipelineresource` defines the Git repository and reference for the PetClinic application:

[source,yaml]
----
apiVersion: tekton.dev/v1alpha1
kind: PipelineResource
metadata:
  name: petclinic-git
spec:
  type: git
  params:
  - name: url
    value: https://github.com/spring-projects/spring-petclinic
----

And the following defines the OpenShift internal registry for the PetClinic image to be pushed to:

[source,yaml]
----
apiVersion: tekton.dev/v1alpha1
kind: PipelineResource
metadata:
  name: petclinic-image
spec:
  type: image
  params:
  - name: url
    value: image-registry.openshift-image-registry.svc:5000/pipelines-tutorial/spring-petclinic
----

Create the above `pipelineresources` via the OpenShift web console using the same steps used earlier for creating the `pipeline` or execute the `oc` commands below.

Add the Git repository input for the `pipeline`:

[source,bash,role=execute-1]
----
oc create -f exercise/petclinic-git-pipeline-resource.yaml
----

Add the registry for the Spring PetClinic image to be pushed to as an output for the `pipeline`:

[source,bash,role=execute-1]
----
oc create -f exercise/petclinic-image-pipeline-resource.yaml
----

You can see the `pipelineresources` created using `tkn`:

[source,bash,role=execute-1]
----
tkn resource ls
----

[source,bash]
----
NAME              TYPE    DETAILS
petclinic-git     git     url: https://github.com/spring-projects/spring-petclinic
petclinic-image   image   url: image-registry.openshift-image-registry.svc:5000/pipelines-tutorial/spring-petclinic
----

= TODO: Trigger Pipeline via web console and CLI

A `pipelinerun` is how you can trigger a `pipeline` and tie it to the Git and image resources that are used for this specific invocation:

[source,yaml]
----
apiVersion: tekton.dev/v1alpha1
kind: PipelineRun
metadata:
  generateName: petclinic-deploy-pipelinerun-
spec:
  pipelineRef:
    name: deploy-pipeline
  trigger:
    type: manual
  serviceAccount: 'pipeline'
  resources:
  - name: app-git
    resourceRef:
      name: petclinic-git
  - name: app-image
    resourceRef:
      name: petclinic-image
----

Create the above `pipelinerun` via the OpenShift web console using the same steps used earlier for creating the `pipeline` or run the following `oc` command:

[source,bash,role=execute-1]
----
oc create -f exercise/petclinic-deploy-pipelinerun.yaml
----

The `pipeline` you created earlier is now instantiated and creating a number of pods to execute the `tasks` that are defined in the `pipeline`. After a few minutes, the `pipeline` should finish successfully.

To view the `pipelinerun` created, run the following `tkn` command:

[source,bash,role=execute-1]
----
tkn pr ls
----

You can view the logs of `pipelinerun` as it executes either through the OpenShift web console or using the Tekton CLI. There are instructions for both options below.

= TODO: Web Console Logs

= Tekton CLI Logs

You'll need to take the name of the `pipelinerun` from the output of `tkn pr ls` and add it to the command below. Next, copy and paste the command below into a terminal and run it with your `pipelinerun` name to see the logs.

[source,bash]
----
tkn pr logs REPLACE_WITH_PIPELINERUN_NAME -f
----

Upon the successful completion of the `pipelinerun`, you will see the following output from the logs:

[source,bash]
----
[s2i-java-8 : nop] Build successful

[openshift-client : oc] deploymentconfig.apps.openshift.io/spring-petclinic rolled out

[openshift-client : nop] Build successful
----

Looking back at the project, you should see that the PetClinic image is successfully built and deployed.

image:../images/petclinic-deployed-2.png[PetClinic Deployed]

= TODO: Add how to view successfully deployed application via its route
